### CPU 密集型程序创建多少个线程合适？

有些同学早已经发现，对于 CPU 密集型来说，理论上 `线程数量 = CPU 核数（逻辑）`就可以了，但是实际上，数量一般会设置为 `CPU 核数（逻辑）+ 1`， 为什么呢？

《Java并发编程实战》这么说：

> 计算(CPU)密集型的线程恰好在某时因为发生一个页错误或者因其他原因而暂停，刚好有一个“额外”的线程，可以确保在这种情况下CPU周期不会中断工作。

所以对于CPU密集型程序，  `CPU 核数（逻辑）+ 1` 个线程数是比较好的经验值的原因了

### I/O密集型程序创建多少个线程合适？

上面已经让大家按照图多画几个周期（你可以动手将I/O耗时与CPU耗时比例调大，比如6倍或7倍），这样你就会得到一个结论，对于 I/O 密集型程序：

> 最佳线程数 =  `(1/CPU利用率)` = `1 + (I/O耗时/CPU耗时)`


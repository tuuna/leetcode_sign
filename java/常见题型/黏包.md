一、TCP黏包问题
TCP黏包问题是因为发送方把若干数据发送，接收方收到数据时候黏在一包，从接受缓冲区来看，后一包的数据黏在前一包的尾部。
二、黏包出现的原因
TCP黏包问题主要出现在两个方面
（1）发送方问题
首先TCP会默认使用Nagle算法，Nagle算法主要做两件事。
第一：上一包分组得到确认，才会发送下一分组。
第二：收集多个小组，在一个确认到来时一起发送。
由此可见Nagle算法会使得数据在发送方造成黏包问题 。
（2）接收方问题
TCP接收方接收到分组的时候，并不会立刻提交到应用层处理，收到的数据放在接收缓存里面，然后应用程序会主动从接受缓存里读取接收的分组，这样以来，如果TCP接收分组的速度大于应用读取分组的速度，多个包的数据会存至缓存区里面，应用读取数据就可能会产生黏包问题。
三、什么时候处理黏包问题
（1）如果每次利用TCP发送数据，就与对方建立连接，然后发送完数据就关闭连接这样就不会出现黏包问题（大家都知道只发送一个数据包）
（2）如果发送的数据无结构，比如文件的传输，只要发送方一直发送，接收方只管接收到储存的数据，此时也不用考虑黏包问题。
（3）如果在连接的一段时间内发送的数据毫无关系，我们就要考虑黏包问题了。
比如：你要发送一段话
I love you.
I want play.
如果产生了黏包问题，接收方可能会傻眼，你让我干啥？所以一般会在数据前加一个长度之类的包，确保接收。
四、处理黏包现象
（1）发送方
　　　　发送方产生黏包问题的主要原因在于Nagle算法，我们可以通过关闭Nagle算法来解决，使用TCP_NODELAY选项来关闭Nagle算法。
（2）接收方
　　　　由于TCP没有处理接收方黏包现象的机制，我们只能在应用层进行处理。
（3）应用层处理
　　解决方法就是循环处理：应用程序在处理从缓存读来的分组时，读完一条数据时，就应该循环读下一条数据，直到所有的数据都被处理；但是如何判断每条数据的长度呢？
　　两种途径：

　　　　1）格式化数据：每条数据有固定的格式（开始符、结束符），这种方法简单易行，但选择开始符和结束符的时候一定要注意每条数据的内部一定不能出现开始符或结束符。

　　　　2）发送长度：发送每条数据的时候，将数据的长度一并发送，比如可以选择每条数据的前4位是数据的长度，应用层处理时可以根据长度来判断每条数据的开始和结束。

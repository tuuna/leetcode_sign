## 如何做限流策略，令牌桶和漏斗算法的使用场景

A---请求<限流>-->B接口(1000/s)

**漏斗算法**

请求先进入漏斗，以一定的速度出水，当水请求大，会溢出，能强行限制调用的速度

![funnel](../../image/funnel.png)

**令牌桶算法**

拿不到令牌就会拒绝

![token_bucket](../../image/token_bucket.png)

突发流量的令牌保证

令牌桶算法会以恒定的速度往令牌池放令牌，当池子中没有令牌时，拒绝服务



空间数据的存储，二维坐标系

Postgrs geo-hash符合hbase存储方式 index

Redis 